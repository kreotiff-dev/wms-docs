# Инвентаризация

## Обзор процесса

Инвентаризация — это процесс проверки фактического наличия товаров на складе и сравнения с учетными данными в системе. Этот процесс необходим для выявления и корректировки расхождений, предотвращения потерь и поддержания точности складского учета. StorageFlow предоставляет гибкие инструменты для проведения как полной, так и выборочной (циклической) инвентаризации.

## Участники процесса

- **Менеджер склада**: планирует инвентаризацию, анализирует результаты
- **Инвентаризатор**: выполняет физический подсчет товаров
- **Супервизор**: подтверждает корректировки, особенно в случае значительных расхождений
- **Система WMS**: обеспечивает учет, контроль и автоматизацию процесса

## Диаграмма процесса

```
┌─────────────────┐     ┌─────────────────┐     ┌─────────────────┐
│   Планирование  │     │    Подсчет      │     │  Сравнение с    │
│  инвентаризации ├────►│   товаров       ├────►│  учетными       │
└─────────────────┘     └─────────────────┘     │  данными        │
                                                └────────┬────────┘
                                                         │
                                                         ▼
┌─────────────────┐     ┌─────────────────┐     ┌─────────────────┐
│   Анализ        │     │   Утверждение   │     │   Корректировка │
│   расхождений   │◄────┤   корректировок │◄────┤   остатков      │
└─────────────────┘     └─────────────────┘     └─────────────────┘
```

## Шаги процесса

### 1. Планирование инвентаризации

**Описание**: Определение объема, типа и сроков проведения инвентаризации.

**Действия**:

- Выбор типа инвентаризации (полная, циклическая, по категориям)
- Определение зон или товаров для инвентаризации
- Назначение персонала
- Подготовка необходимого оборудования (ТСД, сканеры)

**Типы инвентаризации**:

- **Полная инвентаризация**: проверка всех товаров на складе
- **Циклическая инвентаризация**: регулярная проверка определенной части товаров
- **Инвентаризация по категориям**: проверка товаров определенной категории
- **Инвентаризация по ABC**: проверка товаров определенной категории оборачиваемости

### 2. Подсчет товаров

**Описание**: Физический подсчет товаров в выбранных ячейках.

**Действия**:

- Сканирование штрихкода ячейки
- Подсчет фактического количества товаров
- Ввод данных о количестве в систему

**Инструменты**:

- Терминалы сбора данных (ТСД)
- Мобильное приложение StorageFlow
- Бумажные ведомости (в случае отказа оборудования)

### 3. Сравнение с учетными данными

**Описание**: Автоматическое сравнение фактического количества с учетным.

**Действия системы**:

- Сравнение введенных данных с данными в системе
- Выявление расхождений
- Формирование отчета о расхождениях

**Критерии расхождений**:

- **Незначительные**: до 5% от учетного количества
- **Существенные**: от 5% до 20% от учетного количества
- **Критические**: более 20% от учетного количества

### 4. Корректировка остатков

**Описание**: Внесение корректировок в систему на основе фактического подсчета.

**Действия**:

- Принятие решения о корректировке
- Ввод фактического количества в систему
- Указание причины расхождения

**API Endpoint**: `POST /wms/v1/inventory/adjust`

**Входные данные**:

```json
{
  "sku": "PROD-001",
  "locationId": "60d21b4667d0d8992e610c85",
  "actualQuantity": 8,
  "notes": "Корректировка после инвентаризации"
}
```

**Выходные данные**: Информация о корректировке и обновленном остатке

### 5. Утверждение корректировок

**Описание**: Проверка и подтверждение корректировок супервизором.

**Действия**:

- Просмотр списка корректировок
- Анализ значительных расхождений
- Утверждение или отклонение корректировок

**Уровни утверждения**:

- Незначительные корректировки могут быть выполнены инвентаризатором
- Существенные корректировки требуют подтверждения супервизора
- Критические корректировки требуют подтверждения менеджера склада

### 6. Анализ расхождений

**Описание**: Изучение причин расхождений и принятие мер для предотвращения их в будущем.

**Действия**:

- Анализ статистики расхождений
- Выявление систематических проблем
- Разработка мер по устранению причин расхождений

**Отчеты**:

- Отчет по расхождениям
- Анализ по категориям товаров
- Динамика расхождений во времени

## Методики проведения инвентаризации

### Полная инвентаризация

**Описание**: Проверка всех товаров на складе.

**Особенности**:

- Проводится 1-2 раза в год
- Требует значительных ресурсов
- Может требовать приостановки складских операций
- Дает наиболее полную картину состояния склада

**Рекомендации**:

- Планировать в периоды низкой активности
- Разбить процесс на зоны
- Использовать команды по 2 человека для повышения точности

### Циклическая инвентаризация

**Описание**: Регулярная проверка части товаров.

**Особенности**:

- Проводится на регулярной основе
- Не требует приостановки складских операций
- Позволяет поддерживать высокую точность учета
- Распределяет нагрузку на персонал

**Методика проведения**:

- Категория A (высокая оборачиваемость): проверка раз в месяц
- Категория B (средняя оборачиваемость): проверка раз в квартал
- Категория C (низкая оборачиваемость): проверка раз в полгода

### Инвентаризация по событиям

**Описание**: Проверка при возникновении определенных событий.

**Триггеры для инвентаризации**:

- Обнаружение расхождений при сборке заказа
- Невозможность найти товар в указанной ячейке
- Подозрение на хищение или порчу
- Переезд или реорганизация склада

## Интеграция с другими процессами

### Связь с корректировкой инвентаря

При выявлении расхождений в процессе инвентаризации происходит корректировка данных инвентаря:

1. Создается запись о корректировке
2. Обновляется количество товара в ячейке
3. Обновляется общий остаток товара
4. Фиксируется история изменений для аудита

### Связь с отчетностью

Результаты инвентаризации становятся основой для различных отчетов:

1. Отчет о точности инвентаря
2. Анализ причин расхождений
3. Отчеты для бухгалтерии и руководства
4. Перечень корректирующих мероприятий

## Обработка исключительных ситуаций

### Товар находится не в своей ячейке

**Сценарий**: При инвентаризации обнаруживается товар не в той ячейке, где он должен быть по системе.

**Решение**:

1. Фиксация расхождения в обеих ячейках
2. Корректировка данных инвентаря
3. Определение причин перемещения
4. Проверка процессов размещения и сборки

### Обнаружение поврежденных товаров

**Сценарий**: При инвентаризации обнаруживаются поврежденные товары.

**Решение**:

1. Фиксация количества поврежденных товаров
2. Корректировка инвентаря с отметкой о повреждении
3. Перемещение поврежденных товаров в зону брака
4. Проведение расследования причин повреждения

### Значительное несоответствие фактического и учетного количества

**Сценарий**: Обнаружено критическое расхождение (более 20%).

**Решение**:

1. Повторный подсчет другим сотрудником
2. Проверка истории операций с товаром
3. Расследование возможных причин расхождения
4. Утверждение корректировки руководством

## Метрики и KPI

### Основные показатели эффективности

1. **Точность инвентаря**:

   - Процент ячеек без расхождений
   - Целевое значение: > 98%

2. **Среднее расхождение**:

   - Средний процент расхождений по всем позициям
   - Целевое значение: < 2%

3. **Время проведения инвентаризации**:

   - Среднее время на проверку одной ячейки
   - Целевое значение: < 3 минуты

4. **Частота критических расхождений**:
   - Процент позиций с критическими расхождениями
   - Целевое значение: < 0.5%

### Мониторинг процесса

Система автоматически отслеживает:

- Количество проверенных ячеек
- Общее число расхождений
- Распределение расхождений по категориям товаров и зонам склада
- Эффективность работы инвентаризаторов

## Примеры использования API

### Пример корректировки инвентаря

```bash
curl -X POST http://localhost:3000/wms/v1/inventory/adjust \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..." \
  -d '{
    "sku": "PROD-001",
    "locationId": "60d21b4667d0d8992e610c85",
    "actualQuantity": 8,
    "notes": "Корректировка после инвентаризации"
  }'
```

### Пример получения истории корректировок

```bash
curl -X GET http://localhost:3000/wms/v1/inventory/adjustments?sku=PROD-001 \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
```

## Рекомендации по эффективной инвентаризации

1. **Подготовка**:

   - Очистите проходы и обеспечьте доступ ко всем ячейкам
   - Завершите все текущие операции размещения и сборки
   - Проведите краткий инструктаж персонала

2. **Организация процесса**:

   - Разделите склад на зоны для параллельной работы команд
   - Используйте систему двойной проверки для критичных товаров
   - Разработайте четкий план действий для разрешения расхождений

3. **Технологии**:
   - Используйте мобильные терминалы сбора данных
   - Применяйте технологии штрихкодирования
   - Рассмотрите возможность использования RFID для ускорения процесса
4. **Анализ и улучшения**:
   - Анализируйте паттерны расхождений
   - Разрабатывайте и внедряйте корректирующие меры
   - Регулярно обучайте персонал правильным процедурам
